------------------------------------------------------------------------------------
       log:  /Users/sechilds/uottawa/log/.log
  log type:  text
 opened on:   7 Apr 2011, 09:46:42

.         
. ensuredir "estimates/"

Running $Id: ensuredir.ado 1394 2010-01-27 14:50:32Z mesa $
Directory estimates/ already exists.

. ensuredir "estimates/`dofilename'/"

Running $Id: ensuredir.ado 1394 2010-01-27 14:50:32Z mesa $
Directory estimates// already exists.

. // ensuredir "estimates/`dofilename'/test_model/"
. 
. ensuredir "output/"

Running $Id: ensuredir.ado 1394 2010-01-27 14:50:32Z mesa $
Directory output/ already exists.

. ensuredir "output/`dofilename'/"

Running $Id: ensuredir.ado 1394 2010-01-27 14:50:32Z mesa $
Directory output// already exists.

. 
. 
. local delimiter=`"`=char(9)'"'          /* " */

. 
. local count = 1 // One version file.

. local datafile1 "${workdatapath}new_variable_data"

. local nick1 "main"

. 
. // set tracedepth 3
. // set trace on
. 
. capture file close modelsfile

. file open modelsfile using "do/persistence_model2_modellist.txt", read text

. 
. file read modelsfile line

. 
. local mcount = 0

. 
. while r(eof)==0 { 
  2.         if substr( "`line'",1,1)=="#" { 
  3.                 local comment = substr( "`line'",2,.)
  4.                 display as text "Comment: " as result "`comment'"
  5.         } 
  6.         else { 
  7.                 tokenize `"`macval(line)'"', parse(`"`delimiter'"') /* " */
  8.                 if "`1'"!="" { 
  9.                         // ensuredir "estimates/`dofilename'/`3'/"
.                         // ensuredir "output/`dofilename'/`3'/"
.                         
.                         local ++mcount
 10.                         
.                         local modelfile`mcount' "`1'"
 11.                         local modelnick`mcount' "`3'"
 12.                         local modelname`mcount' "`5'"
 13.                 } 
 14.         } 
 15.         file read modelsfile line
 16. } 
Comment: persistence_model2_modellist.txt

. file close modelsfile

. 
. forvalues i = 1/`count' { 
  2.         use "`datafile`i''", clear
  3.         
.         ensuredir "estimates/`dofilename'/`nick`i''/"
  4.         ensuredir "output/`dofilename'/`nick`i''/"
  5.         
.         forvalues m = 1/`mcount' { 
  6.                 ensuredir "estimates/`dofilename'/`nick`i''/`modelnick`m''/"
  7.                 ensuredir "output/`dofilename'/`nick`i''/`modelnick`m''/"
  8.                 foreach n of varlist leave2 leave3 leave /* cont2 cont3 uoretur
> n */ {
  9.                         local myreplace "replace"
 10.                         ensuredir "estimates/`dofilename'/`nick`i''/`modelnick`
> m''/`n'/"
 11.                         ensuredir "output/`dofilename'/`nick`i''/`modelnick`m''
> /`n'/"
 12.                         local sysdate = c(current_date)
 13.                         local systime = c(current_time)
 14.                         local timestring "`sysdate' `systime'"
 15.                         persistence_model `n' using "`modelfile`m''", ///
>                                 estdir( "estimates/`dofilename'/`nick`i''/`modelni
> ck`m''/`n'/") ///
>                                 title( "Regression Output: `modelname`m'' (`n')") 
> ///
>                                 notes( Dependant Variable: `n'; Average marginal e
> ffects shown., Data file: `datafile`i'' (`nick`i''), Do file: `dofilename'.do; Mod
> el file: `modelfile`m''; Date ran: `timestring' ) ///
>                                 sheet( "`modelnick`m''_`n'") ///
>                                 save( "output/`dofilename'/`nick`i''/`modelnick`m'
> '/`n'/${dofilename}_`nick`i''_`modelnick`m''_`n'.xls") `myreplace'
 16.                         local myreplace "append" 
 17.                 } 
 18.         }       
 19. } 

Running $Id: ensuredir.ado 1394 2010-01-27 14:50:32Z mesa $
Directory estimates//main/ already exists.

Running $Id: ensuredir.ado 1394 2010-01-27 14:50:32Z mesa $
Directory output//main/ already exists.

Running $Id: ensuredir.ado 1394 2010-01-27 14:50:32Z mesa $
Directory estimates//main/base/ already exists.

Running $Id: ensuredir.ado 1394 2010-01-27 14:50:32Z mesa $
Directory output//main/base/ already exists.

Running $Id: ensuredir.ado 1394 2010-01-27 14:50:32Z mesa $
Directory estimates//main/base/leave2/ created.

Running $Id: ensuredir.ado 1394 2010-01-27 14:50:32Z mesa $
Directory output//main/base/leave2/ created.
Comment: persistence_model2_reg1.txt
Comment: First set of models - uottawa persistence
invalid syntax
r(198);

end of do-file

r(198);

. log close
       log:  /Users/sechilds/uottawa/log/.log
  log type:  text
 closed on:   7 Apr 2011, 09:47:05
------------------------------------------------------------------------------------
